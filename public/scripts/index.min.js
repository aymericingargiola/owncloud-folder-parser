let fileList,itemsNumber,fullSize;const generateButton=document.querySelector("#generatejson"),dlButton=document.querySelector("#downloadjson"),openLinkButton=document.querySelector("#openlink"),urlInput=document.querySelector("#url-input"),jsonPlaceholder=document.querySelector("#json");jsonPlaceholder.value="";const itemListContainer=document.querySelector(".item-list-container"),itemList=itemListContainer.querySelector(".item-list"),hideItemListButton=itemListContainer.querySelector(".hide-button"),showItemListButton=itemListContainer.querySelector(".show-button");function bytesToSize(bytes){var sizes=["Bytes","Kb","Mb","Gb","Tb"];if(0==bytes)return"0 Byte";var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return parseFloat((bytes/Math.pow(1024,i)).toFixed(2))+" "+sizes[i]}function createItems(fileList){fileList.forEach((function(item,index){var itemTemplate=document.createElement("li");itemTemplate.classList.add("item"),itemTemplate.innerHTML=`<a class="item-container" data-type="${item.extension}" href="${item.url}">\n                <div class="info-bar">\n                    <span class="small-info extension">${item.extension}</span><span class="small-info size">${item.size}</span>\n                </div>\n                <div class="item-content">\n                    <div class="image" data-type="${item.extension}"></div>\n                    <div class="info">\n                        <span>${item.name}</span>\n                    </div>\n                </div>\n            </a>`,setTimeout((function(){itemList.appendChild(itemTemplate)}),100*index)}))}function getFileList(){const url=new URL(urlInput.value),request=new XMLHttpRequest,params=JSON.stringify({url:url.href,origin:url.origin,path:url.pathname+url.search});request.open("POST","http://localhost:1337/parser/filelist",!0),request.setRequestHeader("Content-type","application/json; charset=utf-8"),request.onload=function(){fileList=JSON.parse(this.response),itemsNumber=fileList.length,fullSize=bytesToSize(fileList.reduce((a,b)=>({bytes:a.bytes+b.bytes})).bytes),jsonPlaceholder.classList.remove("error"),jsonPlaceholder.value=JSON.stringify(fileList,void 0,1),generateButton.classList.remove("loading");var dataStr="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(fileList));dlButton.setAttribute("href",dataStr),dlButton.setAttribute("download","fileList.json"),dlButton.classList.remove("disabled"),itemListContainer.classList.add("visible"),hideItemListButton.classList.remove("disabled"),showItemListButton.classList.add("disabled"),createItems(fileList)},request.onerror=function(response){jsonPlaceholder.classList.add("error"),jsonPlaceholder.value=response.type+": "+response.target.status,generateButton.classList.remove("loading")},request.send(params)}generateButton.onclick=function(){getFileList(),this.classList.add("loading")},openLinkButton.onclick=function(){window.open(urlInput.value)},hideItemListButton.onclick=function(){itemListContainer.classList.remove("visible"),hideItemListButton.classList.add("disabled"),showItemListButton.classList.remove("disabled")},showItemListButton.onclick=function(){itemListContainer.classList.add("visible"),hideItemListButton.classList.remove("disabled"),showItemListButton.classList.add("disabled")};